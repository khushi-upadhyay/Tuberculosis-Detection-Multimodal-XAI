<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regional TB Detection - XAI for Tuberculosis</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <div class="nav-container">
                <h1>üî¨ Regional TB Detection</h1>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#comparison">Comparison</a></li>
                    <li><a href="#demo">Demo</a></li>
                    <li><a href="#results">Results</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="hero">
            <div class="container">
                <h1>Location-Specific Tuberculosis Detection</h1>
                <p class="subtitle">Advanced AI system that identifies TB in specific lung regions with explainable visualizations</p>
                <div class="hero-buttons">
                    <button class="btn primary" onclick="scrollToSection('demo')">Try Demo</button>
                    <button class="btn secondary" onclick="scrollToSection('comparison')">Learn More</button>
                </div>
            </div>
        </section>

        <!-- Overview Section -->
        <section id="overview" class="section">
            <div class="container">
                <h2>üéØ Project Overview</h2>
                <div class="overview-grid">
                    <div class="overview-item">
                        <div class="icon">ü©∫</div>
                        <h3>Clinical Problem</h3>
                        <p>Traditional TB detection only answers "TB present or absent" but doesn't specify WHERE in the lungs the disease is located.</p>
                    </div>
                    <div class="overview-item">
                        <div class="icon">üß†</div>
                        <h3>AI Solution</h3>
                        <p>Our regional approach classifies TB presence in 6 specific lung regions, providing precise localization for better diagnosis.</p>
                    </div>
                    <div class="overview-item">
                        <div class="icon">üîç</div>
                        <h3>Explainable AI</h3>
                        <p>Region-specific GradCAM visualizations show exactly where the AI detects TB features in each lung area.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Comparison Section -->
        <section id="comparison" class="section bg-light">
            <div class="container">
                <h2>üîÑ Current vs Regional Approach</h2>
                
                <div class="comparison-container">
                    <div class="approach-card">
                        <h3>‚ùå Current Approach (Global)</h3>
                        <div class="approach-content">
                            <div class="approach-diagram">
                                <div class="input-box">CXR Image + Clinical Data</div>
                                <div class="arrow">‚Üì</div>
                                <div class="model-box">DenseNet121 + FC layers</div>
                                <div class="arrow">‚Üì</div>
                                <div class="output-box">Output: [Normal, TB]</div>
                                <div class="arrow">‚Üì</div>
                                <div class="gradcam-box">GradCAM: General areas</div>
                            </div>
                            <div class="limitations">
                                <h4>Limitations:</h4>
                                <ul>
                                    <li>Cannot specify TB location</li>
                                    <li>Limited clinical relevance</li>
                                    <li>General heatmap only</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="approach-card highlight">
                        <h3>‚úÖ Regional Approach (Multi-Region)</h3>
                        <div class="approach-content">
                            <div class="approach-diagram">
                                <div class="input-box">CXR Image + Clinical Data</div>
                                <div class="arrow">‚Üì</div>
                                <div class="model-box">Enhanced DenseNet121</div>
                                <div class="arrow">‚Üì</div>
                                <div class="output-box">
                                    Global: [Normal, TB]<br>
                                    + 6 Regional outputs
                                </div>
                                <div class="arrow">‚Üì</div>
                                <div class="gradcam-box">Regional GradCAM: Specific areas</div>
                            </div>
                            <div class="advantages">
                                <h4>Advantages:</h4>
                                <ul>
                                    <li>Precise TB localization</li>
                                    <li>High clinical relevance</li>
                                    <li>Region-specific heatmaps</li>
                                    <li>Enhanced explainability</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lung Regions Visualization -->
                <div class="lung-regions">
                    <h3>ü´Å Lung Region Mapping</h3>
                    <div class="lung-diagram">
                        <div class="lung-outline">
                            <div class="region upper-left" title="Upper Left">UL</div>
                            <div class="region upper-right" title="Upper Right">UR</div>
                            <div class="region middle-left" title="Middle Left">ML</div>
                            <div class="region middle-right" title="Middle Right">MR</div>
                            <div class="region lower-left" title="Lower Left">LL</div>
                            <div class="region lower-right" title="Lower Right">LR</div>
                        </div>
                        <div class="region-legend">
                            <div class="legend-item">
                                <span class="legend-color normal"></span>
                                <span>Normal Region</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color tb"></span>
                                <span>TB Detected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Demo Section -->
        <section id="demo" class="section">
            <div class="container">
                <h2>üéÆ Interactive Demo</h2>
                <div class="demo-container">
                    <div class="demo-controls">
                        <div class="demo-tabs">
                            <button class="tab-btn active" onclick="switchTab('samples')">Sample Cases</button>
                            <button class="tab-btn" onclick="switchTab('upload')">Upload Your Own</button>
                        </div>
                        
                        <!-- Sample Cases Tab -->
                        <div id="samples-tab" class="tab-content active">
                            <h3>Select a Sample Case</h3>
                            <div class="sample-buttons">
                                <button class="sample-btn" onclick="loadSample(1)">TB Case 1</button>
                                <button class="sample-btn" onclick="loadSample(2)">TB Case 2</button>
                                <button class="sample-btn" onclick="loadSample(3)">Normal Case</button>
                            </div>
                        </div>
                        
                        <!-- Upload Tab -->
                        <div id="upload-tab" class="tab-content">
                            <h3>Upload Chest X-Ray</h3>
                            <div class="upload-instructions">
                                <p><strong>üìã Instructions:</strong></p>
                                <ul>
                                    <li>Upload a chest X-ray image (PNG, JPG, JPEG)</li>
                                    <li>Provide patient age and gender</li>
                                    <li>Specify any previous abnormality history</li>
                                    <li>Click "Analyze with AI" for TB detection</li>
                                </ul>
                            </div>
                            <div class="upload-section">
                                <div class="file-upload">
                                    <label for="imageUpload" class="upload-label">
                                        <div class="upload-icon">üìÅ</div>
                                        <div class="upload-text">
                                            <strong>Click to upload chest X-ray</strong>
                                            <br>or drag and drop here
                                            <br><small>Supports: PNG, JPG, JPEG (max 10MB)</small>
                                        </div>
                                    </label>
                                    <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                                </div>
                                
                                <div class="clinical-inputs">
                                    <h4>Clinical Information</h4>
                                    <div class="input-group">
                                        <label for="patientAge">Age:</label>
                                        <input type="number" id="patientAge" min="1" max="120" placeholder="Enter age" value="45">
                                    </div>
                                    <div class="input-group">
                                        <label for="patientGender">Gender:</label>
                                        <select id="patientGender">
                                            <option value="0">Male</option>
                                            <option value="1">Female</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <label for="abnormalityHistory">Previous Abnormality:</label>
                                        <select id="abnormalityHistory">
                                            <option value="0">No</option>
                                            <option value="1">Yes</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="analyze-section">
                                    <button id="analyzeBtn" class="btn primary" onclick="analyzeUploadedImage()" disabled>
                                        üîç Analyze with AI
                                    </button>
                                    <div id="analysisProgress" class="progress-indicator" style="display: none;">
                                        <div class="spinner"></div>
                                        <span>Analyzing image...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="model-selector">
                            <h4>Visualization Mode:</h4>
                            <label>
                                <input type="radio" name="model" value="global" checked>
                                Global GradCAM
                            </label>
                            <label>
                                <input type="radio" name="model" value="regional">
                                Regional GradCAM
                            </label>
                        </div>
                    </div>
                    
                    <div class="demo-visualization">
                        <div id="demo-results">
                            <div class="demo-placeholder">
                                <p>üëÜ Select a sample case to see the analysis</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results" class="section bg-light">
            <div class="container">
                <h2>üìä Results & Performance</h2>
                
                <div class="results-grid">
                    <div class="result-card">
                        <h3>üéØ Accuracy Metrics</h3>
                        <div class="metrics">
                            <div class="metric">
                                <span class="metric-value">87.5%</span>
                                <span class="metric-label">Global Accuracy</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">82.3%</span>
                                <span class="metric-label">Regional Accuracy</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">89.1%</span>
                                <span class="metric-label">TB Detection Rate</span>
                            </div>
                        </div>
                    </div>

                    <div class="result-card">
                        <h3>üè• Clinical Benefits</h3>
                        <ul class="benefits-list">
                            <li>‚úÖ Precise TB localization</li>
                            <li>‚úÖ Disease severity assessment</li>
                            <li>‚úÖ Treatment planning support</li>
                            <li>‚úÖ Progress monitoring</li>
                            <li>‚úÖ Enhanced clinician trust</li>
                        </ul>
                    </div>

                    <div class="result-card">
                        <h3>üî¨ Technical Features</h3>
                        <ul class="features-list">
                            <li>üß† DenseNet121 backbone</li>
                            <li>üìä Multi-task learning</li>
                            <li>üéØ 6-region classification</li>
                            <li>üîç Regional GradCAM</li>
                            <li>üìà Synthetic label generation</li>
                        </ul>
                    </div>
                </div>

                <div class="architecture-diagram">
                    <h3>üèóÔ∏è Model Architecture</h3>
                    <div class="arch-flow">
                        <div class="arch-box input">
                            <h4>Input</h4>
                            <p>CXR Image (224√ó224)<br>+ Clinical Data (3 features)</p>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-box feature">
                            <h4>Feature Extraction</h4>
                            <p>DenseNet121: 1024 features<br>Clinical FC: 32 features</p>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-box output">
                            <h4>Multi-Output</h4>
                            <p>Global: [Normal, TB]<br>6 Regions: [Normal, TB] each</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Implementation Section -->
        <section id="implementation" class="section">
            <div class="container">
                <h2>üöÄ Implementation Guide</h2>
                
                <div class="implementation-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Install Dependencies</h3>
                            <code>pip install torch torchvision matplotlib seaborn opencv-python</code>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Train Regional Model</h3>
                            <code>python train_regional_model.py</code>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Run Analysis</h3>
                            <code>python main_regional.py</code>
                        </div>
                    </div>
                </div>

                <div class="code-example">
                    <h3>üíª Quick Usage Example</h3>
                    <pre><code># Load regional model
model = MultimodalRegionalDenseNet121()
model.load_state_dict(torch.load('regional_model_best.pth'))

# Get predictions
outputs = model(image, clinical_data)
global_pred = outputs['global']
regional_preds = outputs['regions']

# Generate regional GradCAM
gradcam = RegionalGradCAM(model)
heatmap = gradcam.generate_gradcam(image, clinical_data, target_region=0)</code></pre>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Regional TB Detection Project. Advanced XAI for Medical Imaging.</p>
            <p>üî¨ Enhancing tuberculosis diagnosis with location-specific AI insights.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
